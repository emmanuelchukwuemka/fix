<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyFigPoint - Earn Points</title>

  <!-- Tailwind + Inter Font -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
          colors: { primary: '#6366f1', accent: '#8b5cf6' }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body class="bg-gray-950 text-white min-h-screen flex relative overflow-auto">

  <!-- Sidebar (Same as Dashboard) -->
  <aside id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-gray-900/90 backdrop-blur-xl border-r border-gray-800 transform -translate-x-full lg:translate-x-0 transition-transform duration-300">
    <div class="flex items-center justify-between p-6 border-b border-gray-800">
      <div class="text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">
        MyFigPoint
      </div>
      <button onclick="toggleSidebar()" class="lg:hidden text-gray-400 hover:text-white">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>

    <nav class="p-4 space-y-2">
      <a href="dashboard.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-800 rounded-xl transition">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
      </a>
      <a href="tasks.html" class="flex items-center space-x-3 px-4 py-3 bg-indigo-600/20 border border-indigo-500/50 rounded-xl text-indigo-300 font-medium">
        <i class="fas fa-tasks"></i>
        <span>Earn Points</span>
      </a>
      <a href="referrals.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-800 rounded-xl transition">
        <i class="fas fa-users"></i>
        <span>Refer & Earn</span>
      </a>
      <a href="wallet.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-800 rounded-xl transition">
        <i class="fas fa-wallet"></i>
        <span>Wallet</span>
      </a>
      <a href="transactions.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-800 rounded-xl transition">
        <i class="fas fa-history"></i>
        <span>Transaction History</span>
      </a>
      <a href="redeem.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-800 rounded-xl transition">
        <i class="fas fa-gift"></i>
        <span>Redeem Points</span>
      </a>
      <a href="profile.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-800 rounded-xl transition">
        <i class="fas fa-user-cog"></i>
        <span>Profile & Settings</span>
      </a>
    </nav>

    <div class="absolute bottom-0 left-0 right-0 p-6 border-t border-gray-800">
      <div class="flex items-center space-x-3">
        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=John" alt="User" class="w-12 h-12 rounded-full ring-2 ring-indigo-500">
        <div>
          <p class="font-semibold">John Doe</p>
          <p class="text-sm text-gray-400">Silver Member</p>
        </div>
      </div>
      <a href="#" onclick="logout()" class="mt-4 block text-center bg-red-600/20 hover:bg-red-600/30 text-red-400 py-2 rounded-lg text-sm font-medium transition">
        Logout
      </a>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 lg:ml-64">
    <!-- Top Bar -->
    <header class="bg-gray-900/70 backdrop-blur-xl border-b border-gray-800 sticky top-0 z-40">
      <div class="flex items-center justify-between px-6 py-5">
        <button onclick="toggleSidebar()" class="lg:hidden text-gray-400 hover:text-white">
          <i class="fas fa-bars text-xl"></i>
        </button>
        <div>
          <h1 class="text-2xl font-bold">Earn Points</h1>
          <p class="text-gray-400 text-sm">Complete tasks below and watch your balance grow!</p>
        </div>
        <div class="text-right">
          <p class="text-3xl font-bold text-indigo-400">3,450.75 pts</p>
          <p class="text-sm text-gray-400">$1,250.50 earned</p>
        </div>
      </div>
    </header>

    <main class="p-6 lg:p-10">
      <!-- Stats Bar -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        <div class="bg-gray-800/60 backdrop-blur rounded-xl p-4 text-center border border-gray-700">
          <p class="text-gray-400 text-sm">Daily Streak</p>
          <p class="text-2xl font-bold text-orange-400">7 Days</p>
        </div>
        <div class="bg-gray-800/60 backdrop-blur rounded-xl p-4 text-center border border-gray-700">
          <p class="text-gray-400 text-sm">Tasks Today</p>
          <p class="text-2xl font-bold text-green-400">5 / 10</p>
        </div>
        <div class="bg-gray-800/60 backdrop-blur rounded-xl p-4 text-center border border-gray-700">
          <p class="text-gray-400 text-sm">Est. Earnings</p>
          <p class="text-2xl font-bold text-yellow-400">$18.50</p>
        </div>
        <div class="bg-gray-800/60 backdrop-blur rounded-xl p-4 text-center border border-gray-700">
          <p class="text-gray-400 text-sm">Bonus Multiplier</p>
          <p class="text-2xl font-bold text-purple-400">1.5x</p>
        </div>
      </div>

      <!-- Task Categories Tabs -->
      <div class="flex flex-wrap gap-3 mb-8 border-b border-gray-800">
        <button class="px-6 py-3 rounded-t-xl font-medium transition bg-indigo-600 text-white">
          All Tasks
        </button>
        <button class="px-6 py-3 rounded-t-xl font-medium transition bg-gray-800 hover:bg-gray-700">
          Daily
        </button>
        <button class="px-6 py-3 rounded-t-xl font-medium transition bg-gray-800 hover:bg-gray-700">
          Surveys
        </button>
        <button class="px-6 py-3 rounded-t-xl font-medium transition bg-gray-800 hover:bg-gray-700">
          Offers
        </button>
        <button class="px-6 py-3 rounded-t-xl font-medium transition bg-gray-800 hover:bg-gray-700">
          Videos
        </button>
        <button class="px-6 py-3 rounded-t-xl font-medium transition bg-gray-800 hover:bg-gray-700">
          Limited Time <span class="ml-2 bg-red-500 text-xs px-2 py-1 rounded-full">Hot</span>
        </button>
      </div>

      <!-- Tasks Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

        <!-- Task Card 1 -->
        <div class="group bg-gray-800/70 backdrop-blur border border-gray-700 rounded-2xl p-6 hover:border-indigo-500 hover:shadow-2xl transition-all">
          <div class="flex justify-between items-start mb-4">
            <div class="bg-indigo-600/20 px-3 py-1 rounded-full text-indigo-300 text-xs font-medium">Survey</div>
            <span class="text-2xl">High Reward</span>
          </div>
          <h3 class="text-xl font-bold mb-2">Complete Health Survey</h3>
          <p class="text-gray-400 text-sm mb-4">Share your opinion on wellness products (10-15 min)</p>
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-3">
              <span class="text-2xl font-bold text-green-400">$8.00</span>
              <span class="text-yellow-400">+80 pts</span>
            </div>
            <div class="text-right">
              <p class="text-xs text-gray-500">Time</p>
              <p class="font-medium">12 min</p>
            </div>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-500">3,241 completed today</span>
            <button class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 px-6 py-3 rounded-xl font-semibold transition transform hover:scale-105">
              Start Now
            </button>
          </div>
        </div>

        <!-- Task Card 2 - Completed -->
        <div class="group bg-gray-880/70 backdrop-blur border border-gray-700 rounded-2xl p-6 opacity-75">
          <div class="flex justify-between items-start mb-4">
            <div class="bg-green-600/20 px-3 py-1 rounded-full text-green-300 text-xs font-medium">Completed</div>
          </div>
          <h3 class="text-xl font-bold mb-2 text-gray-500">Daily Login Bonus</h3>
          <p class="text-gray-500 text-sm mb-4">Just log in to claim your free points!</p>
          <div class="flex items-center gap-3 mb-4">
            <span class="text-xl font-bold text-gray-500">+$2.00</span>
            <span class="text-gray-500">+20 pts</span>
          </div>
          <button disabled class="w-full bg-gray-700 text-gray-500 py-3 rounded-xl cursor-not-allowed">
            Completed Today
          </button>
        </div>

        <!-- Task Card 3 - Limited Time -->
        <div class="group bg-gradient-to-br from-red-900/50 to-pink-900/50 backdrop-blur border border-red-700/50 rounded-2xl p-6 relative overflow-hidden">
          <div class="absolute top-2 right-2 bg-red-600 text-white text-xs px-3 py-1 rounded-full animate-pulse">Ends in 2h 34m</div>
          <div class="flex justify-between items-start mb-4">
            <div class="bg-red-600/30 px-3 py-1 rounded-full text-red-300 text-xs font-medium">Limited Time</div>
          </div>
          <h3 class="text-xl font-bold mb-2">Install & Play Mobile Game</h3>
          <p class="text-gray-300 text-sm mb-4">Reach level 10 in "Rise of Kingdoms" (New users only)</p>
          <div class="flex items-center gap-3 mb-4">
            <span class="text-3xl font-bold text-red-400">$25.00</span>
            <span class="text-yellow-400 text-xl">+250 pts</span>
          </div>
          <button class="w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-600 py-3 rounded-xl font-bold transition transform hover:scale-105">
            Claim Offer →
          </button>
        </div>

        <!-- More Tasks... -->
        <div class="group bg-gray-800/70 backdrop-blur border border-gray-700 rounded-2xl p-6 hover:border-green-500 transition-all">
          <div class="flex justify-between items-start mb-4">
            <div class="bg-green-600/20 px-3 py-1 rounded-full text-green-300 text-xs font-medium">Easy</div>
          </div>
          <h3 class="text-xl font-bold mb-2">Watch Video Ads (5x)</h3>
          <p class="text-gray-400 text-sm mb-4">Watch short ads and earn instantly</p>
          <div class="flex items-center gap-3 mb-4">
            <span class="text-2xl font-bold text-green-400">$3.50</span>
            <span class="text-yellow-400">+35 pts</span>
          </div>
          <button class="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 py-3 rounded-xl font-semibold transition">
            Watch Now
          </button>
        </div>

        <div class="group bg-gray-800/70 backdrop-blur border border-gray-700 rounded-2xl p-6 hover:border-purple-500 transition-all">
          <div class="flex justify-between items-start mb-4">
            <div class="bg-purple-600/20 px-3 py-1 rounded-full text-purple-300 text-xs font-medium">Referral</div>
          </div>
          <h3 class="text-xl font-bold mb-2">Invite a Friend</h3>
          <p class="text-gray-400 text-sm mb-4">They join → You both get bonus points!</p>
          <div class="flex items-center gap-3 mb-4">
            <span class="text-2xl font-bold text-purple-400">$10.00</span>
            <span class="text-yellow-400">+100 pts</span>
          </div>
          <button class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 py-3 rounded-xl font-semibold transition">
            Copy Link
          </button>
        </div>

        <div class="group bg-gray-800/70 backdrop-blur border border-gray-700 rounded-2xl p-6 hover:border-yellow-500 transition-all">
          <h3 class="text-xl font-bold mb-4">More Tasks Coming Soon...</h3>
          <p class="text-gray-400">We're adding new high-paying offers daily!</p>
          <div class="mt-6 text-center">
            <i class="fas fa-sparkles text-5xl text-yellow-500 opacity-50"></i>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Overlay -->
  <div id="overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"></div>

  <script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('-translate-x-full');
      document.getElementById('overlay').classList.toggle('hidden');
    }
    
    // Fetch tasks when page loads
    document.addEventListener('DOMContentLoaded', function() {
      const token = localStorage.getItem('access_token');
      if (!token) {
        window.location.href = 'login.html';
        return;
      }
      
      fetch('/api/tasks/', {
        headers: {
          'Authorization': 'Bearer ' + token
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.tasks && data.tasks.length > 0) {
          // In a real implementation, we would dynamically generate task cards
          // For now, we'll just log the data to show it's working
          console.log('Tasks data:', data.tasks);
        }
      })
      .catch(error => {
        console.error('Error fetching tasks:', error);
        if (error.message && error.message.includes('401')) {
          localStorage.removeItem('access_token');
          window.location.href = 'login.html';
        }
      });
    });
    
    // Logout function
    function logout() {
      localStorage.removeItem('access_token');
      window.location.href = 'login.html';
    }
  </script>
</body>
</html>